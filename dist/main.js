class Ga{state;listeners=new Set;constructor(a){this.state=a}getState(){return this.state}setState(a){this.state={...this.state,...a},this.listeners.forEach((l)=>l(this.state))}subscribe(a){return this.listeners.add(a),()=>this.listeners.delete(a)}}var $;function Ba(a){return $=new Ga(a),$}var Xl={"":"today",today:"today",calendar:"calendar",duas:"duas",quran:"quran",settings:"settings"};class Da{listeners=new Set;current="today";init(){window.addEventListener("hashchange",()=>this.handleHash()),this.handleHash()}handleHash(){let a=window.location.hash.replace("#/","").replace("#",""),l=Xl[a]||"today";if(l!==this.current)this.current=l,this.listeners.forEach((u)=>u(l))}navigate(a){window.location.hash=`#/${a==="today"?"":a}`}getCurrentRoute(){return this.current}onRouteChange(a){return this.listeners.add(a),()=>this.listeners.delete(a)}}var g=new Da;var o={city:"dhaka",cityDisplay:"Dhaka",methodId:1,methodName:"University of Islamic Sciences, Karachi",school:1,theme:"dark",timeFormat:"12h",lastSaved:""};var Ia="Ramadan Taqwim",Ua="https://api.aladhan.com/v1",Ya="Bangladesh",ra=86400000,Ra=1e4,Y="ramadan-bd",r=1,va="ramadan-bd-settings",Oa=9;function ma(){try{let a=localStorage.getItem(va);if(!a)return{...o};let l=JSON.parse(a);return{...o,...l}}catch{return{...o}}}function Pa(a){a.lastSaved=new Date().toISOString(),localStorage.setItem(va,JSON.stringify(a))}function G(a,l,u,A,S){return`aladhan:${a}:${l}:${u}:${A}:${S}`}var t=null;function Za(){if(t)return Promise.resolve(t);return new Promise((a,l)=>{let u=indexedDB.open(Y,r);u.onupgradeneeded=()=>{let A=u.result;if(!A.objectStoreNames.contains("monthTimings"))A.createObjectStore("monthTimings",{keyPath:"cacheKey"});if(!A.objectStoreNames.contains("duaFavorites"))A.createObjectStore("duaFavorites",{keyPath:"duaId"});if(!A.objectStoreNames.contains("quranProgress"))A.createObjectStore("quranProgress",{keyPath:"id"})},u.onsuccess=()=>{t=u.result,a(t)},u.onerror=()=>l(u.error)})}async function Ta(a){try{let l=await Za();return new Promise((u,A)=>{let E=l.transaction("monthTimings","readonly").objectStore("monthTimings").get(a);E.onsuccess=()=>u(E.result||null),E.onerror=()=>A(E.error)})}catch{return null}}async function ia(a){try{let l=await Za();return new Promise((u,A)=>{let S=l.transaction("monthTimings","readwrite");S.objectStore("monthTimings").put(a),S.oncomplete=()=>u(),S.onerror=()=>A(S.error)})}catch{}}function Ca(a){let l=new Date(a.fetchedAt).getTime();return Date.now()-l<ra}async function fa(){try{await Za()}catch{console.warn("IndexedDB unavailable — using in-memory only")}}async function xa(a){let l=null;for(let u=0;u<2;u++)try{let A=new AbortController,S=setTimeout(()=>A.abort(),Ra),j=await fetch(a,{signal:A.signal});if(clearTimeout(S),!j.ok)throw Error(`HTTP ${j.status}: ${j.statusText}`);return await j.json()}catch(A){if(l=A,A.name!=="AbortError"&&!A.message?.includes("fetch"))throw A;if(u===0)await new Promise((S)=>setTimeout(S,1000))}throw l||Error("Fetch failed")}var Kl=86400000,Fl={2026:{startGregorian:"19-02-2026",hijriYear:1447,dayCount:30}};function ca(a){let[l,u,A]=a.split("-").map(Number);return Math.floor(Date.UTC(A,u-1,l)/Kl)}function Ql(a){let[,,l]=a.split("-").map(Number);return Fl[l]||null}function gl(a){let l=Ql(a.dateGregorian);if(!l)return a;let u=ca(a.dateGregorian),A=ca(l.startGregorian),S=u-A;if(S>=0&&S<l.dayCount){let j=S+1;return{...a,hijriMonth:Oa,hijriDay:j,hijriYear:l.hijriYear,hijriDisplay:`${j} Ramaḍān ${l.hijriYear}`,isRamadan:!0}}if(S===l.dayCount&&a.hijriMonth===10&&a.hijriDay>1){let j=a.hijriDay-1;return{...a,hijriDay:j,hijriYear:l.hijriYear,hijriDisplay:`${j} Shawwāl ${l.hijriYear}`,isRamadan:!1}}if(S===-1&&a.hijriMonth===Oa&&a.hijriDay===1)return{...a,hijriMonth:8,hijriDay:30,hijriYear:l.hijriYear,hijriDisplay:`30 Shaʿbān ${l.hijriYear}`,isRamadan:!1};return a}function e(a){return a.map(gl)}function _(a){return a.replace(/\s*\(.*\)$/,"").trim()}function pl(a){let l=a.timings,u=a.date.hijri,A=a.date.gregorian,S=_(l.Imsak||""),j=_(l.Fajr||""),E=S&&S!=="00:00"&&S!=="Invalid date",k=[...u.holidays||[],...u.adjustedHolidays||[]],q={Imsak:S,Fajr:j,Sunrise:_(l.Sunrise||""),Dhuhr:_(l.Dhuhr||""),Asr:_(l.Asr||""),Maghrib:_(l.Maghrib||""),Isha:_(l.Isha||""),SehriEnds:E?S:j,SehriEndsLabel:E?"Imsak":"Fajr (est.)",Iftar:_(l.Maghrib||"")};return{dateGregorian:A.date,dateReadable:a.date.readable,timestamp:parseInt(a.date.timestamp,10),weekday:A.weekday.en,hijriDisplay:`${u.day} ${u.month.en} ${u.year}`,hijriMonth:u.month.number,hijriDay:parseInt(u.day,10),hijriYear:parseInt(u.year,10),isRamadan:u.month.number===9,ramadanDay:u.month.number===9?parseInt(u.day,10):null,holidays:k,prayers:q}}function wa(a,l){let u=e(a.map(pl));return{cacheKey:l,fetchedAt:new Date().toISOString(),days:u}}var aa=null;async function la(){if(aa)return aa;let a=await xa(`${Ua}/methods`);return aa=Object.values(a.data).filter((l)=>l.id!==99).map((l)=>({id:l.id,name:l.name})).sort((l,u)=>l.id-u.id),aa}async function Ma(a){let{city:l,year:u,month:A,methodId:S,school:j}=a,E=new URL(`${Ua}/calendarByCity/${u}/${A}`);E.searchParams.set("city",l),E.searchParams.set("country",Ya),E.searchParams.set("method",String(S)),E.searchParams.set("school",String(j));let k=await xa(E.toString()),q=G(l.toLowerCase(),S,j,u,A);return wa(k.data,q)}function ua(){let a=new Date,l=String(a.getDate()).padStart(2,"0"),u=String(a.getMonth()+1).padStart(2,"0"),A=a.getFullYear();return`${l}-${u}-${A}`}function K(){return new Date().getFullYear()}function F(){return new Date().getMonth()+1}function sa(a){return["","January","February","March","April","May","June","July","August","September","October","November","December"][a]||""}function da(){return new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}function ya(a){return{...a,days:e(a.days)}}async function w(a,l,u){let A=l??K(),S=u??F(),j=G(a.city,a.methodId,a.school,A,S),E=await Ta(j);if(E){let k=ya(E);if(Ca(E))return{data:k,source:"fresh-cache"};return _l(a,A,S),{data:k,source:"stale-cache"}}return za(a,A,S)}async function za(a,l,u){try{let A=await Ma({city:a.cityDisplay,year:l,month:u,methodId:a.methodId,school:a.school}),S=ya(A);return await ia(S),{data:S,source:"network"}}catch(A){return{data:null,source:"error",error:A.message}}}function _l(a,l,u){za(a,l,u).catch(()=>{})}async function oa(a){let l=K(),u=F(),A=await w(a,l,u),S=null;if(u===2)S=await w(a,l,3);else if(u===3)S=await w(a,l,2);return{current:A,other:S}}class ta{online=navigator.onLine;listeners=new Set;init(){window.addEventListener("online",()=>this.update(!0)),window.addEventListener("offline",()=>this.update(!1))}update(a){this.online=a,this.listeners.forEach((l)=>l(a))}isOnline(){return this.online}onChange(a){return this.listeners.add(a),()=>this.listeners.delete(a)}}var W=new ta;function z(a,l,...u){let A=document.createElement(a);if(l)for(let[S,j]of Object.entries(l))if(S==="className")A.className=j;else if(S==="textContent")A.textContent=j;else if(S==="innerHTML")A.innerHTML=j;else A.setAttribute(S,j);for(let S of u)if(typeof S==="string")A.appendChild(document.createTextNode(S));else A.appendChild(S);return A}function Z(a,...l){a.innerHTML="";for(let u of l)a.appendChild(u)}var Wl=[{route:"today",icon:"☪",label:"Today"},{route:"calendar",icon:"\uD83D\uDCC5",label:"Calendar"},{route:"duas",icon:"\uD83E\uDD32",label:"Duas"},{route:"quran",icon:"\uD83D\uDCD6",label:"Quran"},{route:"settings",icon:"⚙",label:"Settings"}];function ea(){let a=z("nav",{className:"nav-bar",role:"navigation","aria-label":"Main navigation"});function l(){a.innerHTML="";let u=g.getCurrentRoute();for(let A of Wl){let S=z("button",{className:`nav-tab${A.route===u?" active":""}`,"aria-label":A.label,"aria-current":A.route===u?"page":""}),j=z("span",{className:"nav-icon","aria-hidden":"true"},A.icon),E=z("span",null,A.label);S.appendChild(j),S.appendChild(E),S.addEventListener("click",()=>g.navigate(A.route)),a.appendChild(S)}}return l(),g.onRouteChange(()=>l()),a}function al(){let a=z("div",{className:"offline-banner",role:"alert"},"You are offline — showing cached data");function l(u){a.classList.toggle("show",!u)}return l(W.isOnline()),W.onChange(l),a}var R=["Fajr","Sunrise","Dhuhr","Asr","Maghrib","Isha"];function m(a){let[l,u]=a.split(":").map(Number);return l*60+u}function Aa(a){if(a<=0)return"0m 0s";let l=Math.floor(a/1000),u=Math.floor(l/3600),A=Math.floor(l%3600/60),S=l%60;if(u>0)return`${u}h ${A}m ${S}s`;if(A>0)return`${A}m ${S}s`;return`${S}s`}function Gl(a){let[l,u]=a.split(":").map(Number),A=l>=12?"PM":"AM";return`${l%12||12}:${String(u).padStart(2,"0")} ${A}`}function v(a,l){if(l==="12h")return Gl(a);return a}function Sa(a){let l=new Date,u=l.getHours()*60+l.getMinutes(),A=l.getHours()*3600000+l.getMinutes()*60000+l.getSeconds()*1000;for(let S of R){let j=a.prayers[S],E=m(j);if(E>u){let q=E*60000-A,N=R.indexOf(S)-1,b=N>=0?a.prayers[R[N]]:"00:00",h=m(b),J=E-h,O=u-h,X=J>0?Math.min(1,Math.max(0,O/J)):0;return{name:S,time:j,prevTime:b,remainingMs:q,remainingDisplay:Aa(q),progress:X}}}return null}function ll(a){let l=new Date,u=l.getHours()*60+l.getMinutes();return m(a)<=u}function ul(a,l){return l?.name===a}function ja(a){if(!a.isRamadan)return null;let l=new Date,u=l.getHours()*3600000+l.getMinutes()*60000+l.getSeconds()*1000,A=a.prayers.SehriEnds,S=a.prayers.Iftar,j=m(A)*60000,E=m(S)*60000;if(u<j){let k=j-u,q=j,N=q>0?Math.min(1,Math.max(0,u/q)):0;return{label:"Sehri Ends In",targetTime:A,startTime:"00:00",remainingMs:k,remainingDisplay:Aa(k),progress:N,type:"sehri"}}if(u<E){let k=E-u,q=E-j,N=u-j,b=q>0?Math.min(1,Math.max(0,N/q)):0;return{label:"Iftar In",targetTime:S,startTime:A,remainingMs:k,remainingDisplay:Aa(k),progress:b,type:"iftar"}}return null}function zl(a){let l=z("div",{className:"hero-container"}),u=$.getState().settings.timeFormat,A=z("div",{className:"hero-card"});A.appendChild(z("div",{className:"hero-label"},"Sehri Ends")),A.appendChild(z("div",{className:"hero-time"},v(a.SehriEnds,u))),A.appendChild(z("div",{className:"hero-sublabel"},`(${a.SehriEndsLabel})`));let S=z("div",{className:"hero-card"});return S.appendChild(z("div",{className:"hero-label"},"Iftar")),S.appendChild(z("div",{className:"hero-time"},v(a.Iftar,u))),S.appendChild(z("div",{className:"hero-sublabel"},"(Maghrib)")),l.appendChild(A),l.appendChild(S),l}function La(a,l,u){let A=z("section",{className:"countdown-hero","aria-live":"polite"}),S=$.getState().settings.timeFormat,j=u==="iftar"&&a,E=u==="next-prayer"&&l;if(j&&a){A.classList.add(a.type);let k=a.type==="sehri"?"\uD83C\uDF19":"\uD83C\uDF05",q=z("div",{className:"hero-cd-label"});q.innerHTML=`${k} <span class="hero-cd-type">${a.label}</span>`,A.appendChild(q),A.appendChild(z("div",{className:"hero-cd-time"},a.remainingDisplay));let N=z("div",{className:"hero-cd-bar-wrap"}),b=z("div",{className:"hero-cd-bar"}),h=z("div",{className:`hero-cd-bar-fill ${a.type}`});h.style.width=`${Math.round(a.progress*100)}%`,b.appendChild(h),N.appendChild(b);let J=z("div",{className:"hero-cd-bar-labels"});J.appendChild(z("span",null,v(a.startTime,S))),J.appendChild(z("span",null,v(a.targetTime,S))),N.appendChild(J),A.appendChild(N)}else if(E&&l){A.classList.add("next-prayer");let k=z("div",{className:"hero-cd-label"});k.innerHTML=`\uD83D\uDD4C <span class="hero-cd-type">Next: ${l.name}</span>`,A.appendChild(k),A.appendChild(z("div",{className:"hero-cd-time"},l.remainingDisplay));let q=z("div",{className:"hero-cd-bar-wrap"}),N=z("div",{className:"hero-cd-bar"}),b=z("div",{className:"hero-cd-bar-fill gold"});b.style.width=`${Math.round(l.progress*100)}%`,N.appendChild(b),q.appendChild(N);let h=z("div",{className:"hero-cd-bar-labels"});h.appendChild(z("span",null,v(l.prevTime,S))),h.appendChild(z("span",null,v(l.time,S))),q.appendChild(h),A.appendChild(q)}else if(a){A.classList.add(a.type);let k=a.type==="sehri"?"\uD83C\uDF19":"\uD83C\uDF05";A.appendChild(z("div",{className:"hero-cd-label"},`${k} ${a.label}`)),A.appendChild(z("div",{className:"hero-cd-time"},a.remainingDisplay))}else if(l)A.classList.add("next-prayer"),A.appendChild(z("div",{className:"hero-cd-label"},`\uD83D\uDD4C Next: ${l.name}`)),A.appendChild(z("div",{className:"hero-cd-time"},l.remainingDisplay));else A.appendChild(z("div",{className:"hero-cd-label"},"All prayers completed for today"));if(a&&l){let k=z("div",{className:"hero-cd-toggle"}),q=z("button",{className:`toggle-pill${u==="iftar"?" active":""}`},"Iftar"),N=z("button",{className:`toggle-pill${u==="next-prayer"?" active":""}`},"Next Prayer");k.appendChild(q),k.appendChild(N),A.appendChild(k)}return A}function Al(a,l,u,A){let S=$.getState().settings.timeFormat;if(A==="iftar"&&l){a.className=`countdown-hero ${l.type}`;let j=a.querySelector(".hero-cd-type");if(j)j.textContent=l.label;let E=a.querySelector(".hero-cd-time");if(E)E.textContent=l.remainingDisplay;let k=a.querySelector(".hero-cd-bar-fill");if(k)k.style.width=`${Math.round(l.progress*100)}%`,k.className=`hero-cd-bar-fill ${l.type}`;let q=a.querySelectorAll(".hero-cd-bar-labels span");if(q.length===2)q[0].textContent=v(l.startTime,S),q[1].textContent=v(l.targetTime,S)}else if(A==="next-prayer"&&u){a.className="countdown-hero next-prayer";let j=a.querySelector(".hero-cd-type");if(j)j.textContent=`Next: ${u.name}`;let E=a.querySelector(".hero-cd-time");if(E)E.textContent=u.remainingDisplay;let k=a.querySelector(".hero-cd-bar-fill");if(k)k.style.width=`${Math.round(u.progress*100)}%`,k.className="hero-cd-bar-fill gold";let q=a.querySelectorAll(".hero-cd-bar-labels span");if(q.length===2)q[0].textContent=v(u.prevTime,S),q[1].textContent=v(u.time,S)}else if(!l&&!u){let j=a.querySelector(".hero-cd-time");if(j)j.textContent="";let E=a.querySelector(".hero-cd-label");if(E)E.textContent="All prayers completed for today"}}function Va(a,l){let u=z("div",{className:"prayer-list"}),A=$.getState().settings.timeFormat;for(let S of R){let j=a.prayers[S],E=ll(j),k=ul(S,l),q=z("div",{className:`prayer-card${E&&!k?" past":""}${k?" now":""}`}),N=z("div",{className:"prayer-left"});if(N.appendChild(z("span",{className:"prayer-name"},S)),k)N.appendChild(z("span",{className:"prayer-now-badge"},"Now"));let b=z("span",{className:"prayer-time"},v(j,A));q.appendChild(N),q.appendChild(b),u.appendChild(q)}return u}function Sl(a){let l=a.school===1?"Hanafi":"Shafi",u=`${a.cityDisplay} · ${a.methodName.split(",")[0]} · ${l}`;return z("div",{className:"transparency-footer"},u)}function M(){let a=z("div",null);a.appendChild(z("div",{className:"skeleton skeleton-line short",style:"height: 24px;"})),a.appendChild(z("div",{className:"skeleton skeleton-line",style:"height: 16px; width: 50%; margin-top: 8px;"}));let l=z("div",{className:"skeleton-hero"});l.appendChild(z("div",{className:"skeleton"})),l.appendChild(z("div",{className:"skeleton"})),a.appendChild(l),a.appendChild(z("div",{className:"skeleton skeleton-card",style:"height: 80px; margin-bottom: 16px;"}));for(let u=0;u<6;u++)a.appendChild(z("div",{className:"skeleton skeleton-card"}));return a}var B=null,P="iftar";function Xa(a){let l=$.getState();if(B)clearInterval(B),B=null;if(l.isLoading&&!l.todayData){Z(a,M());return}if(l.error&&!l.todayData){let h=z("div",{className:"error-state"});h.appendChild(z("div",{className:"error-icon"},"⚠")),h.appendChild(z("div",{className:"error-message"},l.error));let J=z("button",{className:"btn-retry"},"Try Again");J.addEventListener("click",()=>{window.location.reload()}),h.appendChild(J),Z(a,h);return}let u=l.todayData;if(!u){Z(a,M());return}let A=l.settings,S=document.createDocumentFragment(),j=z("header",{className:"page-header"});j.appendChild(z("div",{className:"app-name"},`☪ ${Ia}`)),j.appendChild(z("div",{className:"hijri-date"},u.hijriDisplay)),j.appendChild(z("div",{className:"greg-date"},da())),S.appendChild(j),S.appendChild(zl(u.prayers));let E=ja(u),k=Sa(u);if(!E)P="next-prayer";let q=La(E,k,P);if(q.querySelectorAll(".toggle-pill").forEach((h)=>{h.addEventListener("click",()=>{P=h.textContent==="Iftar"?"iftar":"next-prayer";let J=La(ja(u),Sa(u),P);J.querySelectorAll(".toggle-pill").forEach((O)=>{O.addEventListener("click",()=>{P=O.textContent==="Iftar"?"iftar":"next-prayer",Xa(a)})}),q.replaceWith(J)})}),S.appendChild(q),S.appendChild(Va(u,k)),u.isRamadan&&u.ramadanDay){let h=z("div",{className:"ramadan-counter"});h.innerHTML=`Day <strong>${u.ramadanDay}</strong> of Ramaḍān`,S.appendChild(h)}else if(u.isRamadan){let h=z("div",{className:"ramadan-counter"});h.innerHTML=`Day <strong>${u.hijriDay}</strong> of Ramaḍān`,S.appendChild(h)}S.appendChild(Sl(A)),Z(a,S);let b=a.querySelector(".countdown-hero");B=window.setInterval(()=>{let h=ja(u),J=Sa(u);if(b)Al(b,h,J,P);if(J?.name!==k?.name){let O=a.querySelector(".prayer-list");if(O){let X=Va(u,J);O.replaceWith(X)}}},1000)}function jl(){if(B)clearInterval(B),B=null}function El(){let a=$.getState(),l=ua();if(a.currentMonthData){let u=a.currentMonthData.days.find((A)=>A.dateGregorian===l);if(u)return u}if(a.otherMonthData){let u=a.otherMonthData.days.find((A)=>A.dateGregorian===l);if(u)return u}return null}function kl(a){let l=a.dateGregorian===ua(),u=a.isRamadan,A=a.holidays.some((J)=>J.toLowerCase().includes("lailat")),S=a.holidays.some((J)=>J.toLowerCase().includes("eid")),j=$.getState().settings.timeFormat,E="day-row";if(l)E+=" today";if(!u)E+=" non-ramadan";let k=z("div",{className:E,id:l?"today-row":void 0}),q=z("div",{className:"day-row-header"});q.appendChild(z("span",{className:"day-row-date"},`${a.dateReadable} · ${a.weekday}`)),q.appendChild(z("span",{className:"day-row-hijri"},a.hijriDisplay)),k.appendChild(q);let N=z("div",{className:"day-row-times"}),b=z("span",{className:"day-row-iftar"});b.innerHTML=`Iftar <strong>${v(a.prayers.Iftar,j)}</strong>`;let h=z("span",{className:"day-row-sehri"});if(h.innerHTML=`Sehri <strong>${v(a.prayers.SehriEnds,j)}</strong>`,N.appendChild(b),N.appendChild(h),k.appendChild(N),l)k.appendChild(z("span",{className:"day-badge today-badge"},"TODAY"));if(A)k.appendChild(z("span",{className:"day-badge holiday-badge"},"⭐ Lailat-ul-Qadr"));if(S)k.appendChild(z("span",{className:"day-badge eid-badge"},"\uD83C\uDF89 Eid ul-Fitr"));return k}var p=K(),x=F();function T(a){let l=$.getState(),u=document.createDocumentFragment();u.appendChild(z("h1",{className:"page-title"},"Calendar"));let A=z("div",{className:"month-nav"}),S=z("button",{className:"month-nav-btn","aria-label":"Previous month"},"◀");S.addEventListener("click",()=>Nl(-1,a));let j=z("span",{className:"month-nav-title"},`${sa(x)} ${p}`),E=z("button",{className:"month-nav-btn","aria-label":"Next month"},"▶");E.addEventListener("click",()=>Nl(1,a)),A.appendChild(S),A.appendChild(j),A.appendChild(E),u.appendChild(A);let k=p===K()&&x===F();if(!k){let N=z("div",{className:"calendar-actions"}),b=z("button",{className:"calendar-action-btn"},"\uD83D\uDCCD Jump to today");b.addEventListener("click",()=>{p=K(),x=F(),T(a),requestAnimationFrame(()=>{let J=a.querySelector("#today-row");if(J)J.scrollIntoView({behavior:"smooth",block:"center"})})});let h=z("button",{className:"calendar-action-btn"},"\uD83D\uDCC5 This month");h.addEventListener("click",()=>{p=K(),x=F(),T(a)}),N.appendChild(b),N.appendChild(h),u.appendChild(N)}let q=Bl();if(!q){if(l.isLoading)u.appendChild(M());else{let N=z("div",{className:"error-state"});N.appendChild(z("div",{className:"error-message"},"Loading calendar data...")),u.appendChild(N),Dl(a)}Z(a,u);return}for(let N of q.days)u.appendChild(kl(N));if(Z(a,u),k)requestAnimationFrame(()=>{let N=a.querySelector("#today-row");if(N)N.scrollIntoView({behavior:"smooth",block:"center"})})}function Bl(){let a=$.getState();if(a.currentMonthData){let l=a.currentMonthData.days[0];if(l){let[,u,A]=l.dateGregorian.split("-").map(Number);if(u===x&&A===p)return a.currentMonthData}}if(a.otherMonthData){let l=a.otherMonthData.days[0];if(l){let[,u,A]=l.dateGregorian.split("-").map(Number);if(u===x&&A===p)return a.otherMonthData}}return null}async function Dl(a){let l=$.getState().settings;$.setState({isLoading:!0});let u=await w(l,p,x);if(u.data)$.setState({otherMonthData:u.data,isLoading:!1});else $.setState({isLoading:!1,error:u.error||"Failed to load calendar"});T(a)}function Nl(a,l){if(x+=a,x>12)x=1,p++;if(x<1)x=12,p--;T(l)}var Ka=[{name:"Dhaka",normalized:"dhaka"},{name:"Chittagong",normalized:"chittagong"},{name:"Khulna",normalized:"khulna"},{name:"Rajshahi",normalized:"rajshahi"},{name:"Sylhet",normalized:"sylhet"},{name:"Rangpur",normalized:"rangpur"},{name:"Barisal",normalized:"barisal"},{name:"Mymensingh",normalized:"mymensingh"},{name:"Comilla",normalized:"comilla"},{name:"Gazipur",normalized:"gazipur"},{name:"Narayanganj",normalized:"narayanganj"},{name:"Cox's Bazar",normalized:"coxs bazar"},{name:"Jessore",normalized:"jessore"},{name:"Bogra",normalized:"bogra"},{name:"Dinajpur",normalized:"dinajpur"},{name:"Tangail",normalized:"tangail"},{name:"Noakhali",normalized:"noakhali"},{name:"Brahmanbaria",normalized:"brahmanbaria"},{name:"Narsingdi",normalized:"narsingdi"},{name:"Faridpur",normalized:"faridpur"},{name:"Pabna",normalized:"pabna"},{name:"Jamalpur",normalized:"jamalpur"},{name:"Kushtia",normalized:"kushtia"},{name:"Habiganj",normalized:"habiganj"},{name:"Moulvibazar",normalized:"moulvibazar"},{name:"Sunamganj",normalized:"sunamganj"},{name:"Netrokona",normalized:"netrokona"},{name:"Sherpur",normalized:"sherpur"},{name:"Kishoreganj",normalized:"kishoreganj"},{name:"Manikganj",normalized:"manikganj"},{name:"Munshiganj",normalized:"munshiganj"},{name:"Madaripur",normalized:"madaripur"},{name:"Gopalganj",normalized:"gopalganj"},{name:"Shariatpur",normalized:"shariatpur"},{name:"Rajbari",normalized:"rajbari"},{name:"Satkhira",normalized:"satkhira"},{name:"Bagerhat",normalized:"bagerhat"},{name:"Narail",normalized:"narail"},{name:"Magura",normalized:"magura"},{name:"Jhenaidah",normalized:"jhenaidah"},{name:"Meherpur",normalized:"meherpur"},{name:"Chuadanga",normalized:"chuadanga"},{name:"Kurigram",normalized:"kurigram"},{name:"Lalmonirhat",normalized:"lalmonirhat"},{name:"Nilphamari",normalized:"nilphamari"},{name:"Gaibandha",normalized:"gaibandha"},{name:"Thakurgaon",normalized:"thakurgaon"},{name:"Panchagarh",normalized:"panchagarh"},{name:"Joypurhat",normalized:"joypurhat"},{name:"Naogaon",normalized:"naogaon"},{name:"Natore",normalized:"natore"},{name:"Nawabganj",normalized:"nawabganj"},{name:"Sirajganj",normalized:"sirajganj"},{name:"Pirojpur",normalized:"pirojpur"},{name:"Jhalokati",normalized:"jhalokati"},{name:"Barguna",normalized:"barguna"},{name:"Patuakhali",normalized:"patuakhali"},{name:"Bhola",normalized:"bhola"},{name:"Feni",normalized:"feni"},{name:"Lakshmipur",normalized:"lakshmipur"},{name:"Chandpur",normalized:"chandpur"},{name:"Bandarban",normalized:"bandarban"},{name:"Rangamati",normalized:"rangamati"},{name:"Khagrachari",normalized:"khagrachari"}];var ql=[1,3,5,2];async function hl(a){let l=$.getState(),u={...l.settings};if(!u.timeFormat)u.timeFormat="12h";if(!u.theme)u.theme="dark";let A=l.methods;if(!A)try{A=await la(),$.setState({methods:A})}catch{A=[{id:1,name:"University of Islamic Sciences, Karachi"},{id:3,name:"Muslim World League"},{id:5,name:"Egyptian General Authority of Survey"},{id:2,name:"Islamic Society of North America (ISNA)"}]}let S=document.createDocumentFragment();S.appendChild(z("h1",{className:"page-title"},"Settings"));let j=z("div",{className:"settings-form"}),E=z("div",{className:"form-group"});E.appendChild(z("label",{className:"form-label"},"City"));let k=z("select",{className:"form-select","aria-label":"Select city"});for(let n of Ka){let H=z("option",{value:n.name});if(H.textContent=n.name,n.normalized===u.city)H.selected=!0;k.appendChild(H)}k.addEventListener("change",()=>{let n=Ka.find((H)=>H.name===k.value);if(n)u.city=n.normalized,u.cityDisplay=n.name}),E.appendChild(k),j.appendChild(E);let q=z("div",{className:"form-group"});q.appendChild(z("label",{className:"form-label"},"Calculation Method"));let N=z("select",{className:"form-select","aria-label":"Select calculation method"}),b=A.filter((n)=>ql.includes(n.id)),h=A.filter((n)=>!ql.includes(n.id));for(let n of b){let H=z("option",{value:String(n.id)});if(H.textContent=n.id===1?`★ ${n.name} (Recommended)`:n.name,n.id===u.methodId)H.selected=!0;N.appendChild(H)}if(h.length>0){let n=z("optgroup",{label:"Other methods"});for(let H of h){let V=z("option",{value:String(H.id)});if(V.textContent=H.name,H.id===u.methodId)V.selected=!0;n.appendChild(V)}N.appendChild(n)}N.addEventListener("change",()=>{let n=parseInt(N.value),H=A.find((V)=>V.id===n);if(H)u.methodId=n,u.methodName=H.name}),q.appendChild(N),q.appendChild(z("div",{className:"form-hint"},"★ Recommended for Bangladesh")),j.appendChild(q);let J=z("div",{className:"form-group"});J.appendChild(z("label",{className:"form-label"},"Asr Calculation"));let O=z("div",{className:"radio-group"}),X=z("label",{className:"radio-option"}),U=z("input",{type:"radio",name:"school",value:"1"});if(u.school===1)U.checked=!0;U.addEventListener("change",()=>{u.school=1}),X.appendChild(U),X.appendChild(document.createTextNode(" Hanafi (recommended)")),O.appendChild(X);let L=z("label",{className:"radio-option"}),Q=z("input",{type:"radio",name:"school",value:"0"});if(u.school===0)Q.checked=!0;Q.addEventListener("change",()=>{u.school=0}),L.appendChild(Q),L.appendChild(document.createTextNode(" Shafi")),O.appendChild(L),J.appendChild(O),j.appendChild(J);let c=z("div",{className:"form-group"});c.appendChild(z("label",{className:"form-label"},"Theme"));let _a=z("div",{className:"radio-group"});for(let n of["dark","light","system"]){let H=z("label",{className:"radio-option"}),V=z("input",{type:"radio",name:"theme",value:n});if(u.theme===n)V.checked=!0;V.addEventListener("change",()=>{u.theme=n}),H.appendChild(V),H.appendChild(document.createTextNode(` ${n.charAt(0).toUpperCase()+n.slice(1)}`)),_a.appendChild(H)}c.appendChild(_a),j.appendChild(c);let qa=z("div",{className:"form-group"});qa.appendChild(z("label",{className:"form-label"},"Time Format"));let ha=z("div",{className:"radio-group radio-group-row"}),$a=z("label",{className:"radio-option"}),ba=z("input",{type:"radio",name:"timeFormat",value:"12h"});if(u.timeFormat==="12h")ba.checked=!0;ba.addEventListener("change",()=>{u.timeFormat="12h"}),$a.appendChild(ba),$a.appendChild(document.createTextNode(" 12-hour (4:52 AM)")),ha.appendChild($a);let na=z("label",{className:"radio-option"}),Ja=z("input",{type:"radio",name:"timeFormat",value:"24h"});if(u.timeFormat==="24h")Ja.checked=!0;Ja.addEventListener("change",()=>{u.timeFormat="24h"}),na.appendChild(Ja),na.appendChild(document.createTextNode(" 24-hour (04:52)")),ha.appendChild(na),qa.appendChild(ha),j.appendChild(qa);let I=z("button",{className:"btn-save"},"\uD83D\uDCBE Save Settings");if(!W.isOnline())I.disabled=!0,I.title="Connect to update";I.addEventListener("click",async()=>{I.disabled=!0,I.textContent="Saving...",Yl(u.theme),Pa(u);let n=K(),H=F(),V=G(l.settings.city,l.settings.methodId,l.settings.school,n,H),Zl=G(u.city,u.methodId,u.school,n,H);if(V!==Zl){let y=await za(u,n,H);if(y.data)$.setState({settings:u,currentMonthData:y.data,todayData:y.data.days.find((xl)=>{let Ha=new Date,Ll=String(Ha.getDate()).padStart(2,"0"),Vl=String(Ha.getMonth()+1).padStart(2,"0");return xl.dateGregorian===`${Ll}-${Vl}-${Ha.getFullYear()}`})||null});else $.setState({settings:u,error:y.error||null})}else $.setState({settings:u});rl("Settings saved"),g.navigate("today")}),j.appendChild(I),S.appendChild(j);let Wa=z("div",{className:"settings-footer"});Wa.innerHTML=`
    Data provided by <a href="https://aladhan.com" target="_blank" rel="noopener">AlAdhan.com</a><br>
    App version 1.1.0
  `,S.appendChild(Wa),Z(a,S)}function Yl(a){if(a==="system"){let l=window.matchMedia("(prefers-color-scheme: dark)").matches;document.documentElement.setAttribute("data-theme",l?"dark":"light")}else document.documentElement.setAttribute("data-theme",a)}function rl(a){let l=document.querySelector(".toast");if(!l)l=z("div",{className:"toast"}),document.body.appendChild(l);l.textContent=a,l.classList.add("show"),setTimeout(()=>l.classList.remove("show"),2000)}var Ea=null;function $l(){if(Ea)return Promise.resolve(Ea);return new Promise((a,l)=>{let u=indexedDB.open(Y,r);u.onsuccess=()=>{Ea=u.result,a(Ea)},u.onerror=()=>l(u.error)})}async function Fa(){try{let a=await $l();return new Promise((l,u)=>{let j=a.transaction("duaFavorites","readonly").objectStore("duaFavorites").getAll();j.onsuccess=()=>{let E=(j.result||[]).map((k)=>k.duaId);l(new Set(E))},j.onerror=()=>u(j.error)})}catch{return new Set}}async function bl(a){try{let l=await $l(),A=(await Fa()).has(a);return new Promise((S,j)=>{let E=l.transaction("duaFavorites","readwrite"),k=E.objectStore("duaFavorites");if(A)k.delete(a);else k.put({duaId:a});E.oncomplete=()=>S(!A),E.onerror=()=>j(E.error)})}catch{return!1}}function ka(a){let l=document.querySelector(".toast");if(!l)l=z("div",{className:"toast"}),document.body.appendChild(l);l.textContent=a,l.classList.add("show"),setTimeout(()=>l.classList.remove("show"),2000)}function nl(a,l,u){let A=z("div",{className:"dua-card"}),S=z("div",{className:"dua-card-header"});S.appendChild(z("span",{className:"dua-card-title"},a.titleEn)),A.appendChild(S),A.appendChild(z("div",{className:"dua-arabic",lang:"ar",dir:"rtl"},a.arabicText)),A.appendChild(z("div",{className:"dua-transliteration"},a.transliteration)),A.appendChild(z("div",{className:"dua-translation"},a.translationEn)),A.appendChild(z("div",{className:"dua-source"},`\uD83D\uDCD6 ${a.source}`));let j=z("div",{className:"dua-actions"}),E=z("button",{className:"dua-action-btn","aria-label":"Copy Arabic"},"\uD83D\uDCCB Arabic");E.addEventListener("click",async()=>{try{await navigator.clipboard.writeText(a.arabicText),ka("Arabic text copied")}catch{ka("Copy failed")}});let k=z("button",{className:"dua-action-btn","aria-label":"Copy Translation"},"\uD83D\uDCCB English");k.addEventListener("click",async()=>{try{await navigator.clipboard.writeText(a.translationEn),ka("Translation copied")}catch{ka("Copy failed")}});let q=z("button",{className:`dua-fav-btn${l?" active":""}`,"aria-label":l?"Remove from favorites":"Add to favorites"},l?"♥":"♡");return q.addEventListener("click",()=>u(a.id)),j.appendChild(E),j.appendChild(k),j.appendChild(q),A.appendChild(j),A}var Jl=[{id:"iftar-1",titleEn:"Dua for Breaking Fast",arabicText:"اللَّهُمَّ إِنِّي لَكَ صُمْتُ وَبِكَ آمَنْتُ وَعَلَى رِزْقِكَ أَفْطَرْتُ",transliteration:"Allahumma inni laka sumtu wa bika aamantu wa 'ala rizqika aftartu",translationEn:"O Allah! I fasted for You and I believe in You and I break my fast with Your sustenance.",category:"iftar",source:"Abu Dawud 2358"},{id:"iftar-2",titleEn:"Dua When Breaking Fast",arabicText:"ذَهَبَ الظَّمَأُ وَابْتَلَّتِ الْعُرُوقُ وَثَبَتَ الْأَجْرُ إِنْ شَاءَ اللَّهُ",transliteration:"Dhahaba al-zama'u wabtallatil-'urooqu wa thabatal-ajru inshaa'Allah",translationEn:"The thirst has gone, the veins are moistened, and the reward is confirmed, if Allah wills.",category:"iftar",source:"Abu Dawud 2357"},{id:"sehri-1",titleEn:"Intention for Fasting (Niyyah)",arabicText:"وَبِصَوْمِ غَدٍ نَوَيْتُ مِنْ شَهْرِ رَمَضَانَ",transliteration:"Wa bisawmi ghadin nawaytu min shahri ramadan",translationEn:"I intend to keep the fast for tomorrow in the month of Ramadan.",category:"sehri",source:"Abu Dawud 2454"},{id:"sehri-2",titleEn:"Dua Before Eating Sehri",arabicText:"بِسْمِ اللَّهِ وَعَلَى بَرَكَةِ اللَّهِ",transliteration:"Bismillahi wa 'ala barakatillah",translationEn:"In the name of Allah and with the blessings of Allah.",category:"sehri",source:"General practice"},{id:"general-1",titleEn:"Dua for Forgiveness",arabicText:"رَبَّنَا اغْفِرْ لِي وَلِوَالِدَيَّ وَلِلْمُؤْمِنِينَ يَوْمَ يَقُومُ الْحِسَابُ",transliteration:"Rabbana-ghfir li wa li-walidayya wa lil-mu'mineena yawma yaqoomul-hisaab",translationEn:"Our Lord, forgive me and my parents and the believers the Day the account is established.",category:"general",source:"Quran 14:41"},{id:"general-2",titleEn:"Dua for Mercy",arabicText:"رَبِّ اغْفِرْ وَارْحَمْ وَأَنْتَ خَيْرُ الرَّاحِمِينَ",transliteration:"Rabbighfir warham wa anta khairur-raahimeen",translationEn:"My Lord, forgive and have mercy, and You are the best of the merciful.",category:"general",source:"Quran 23:118"},{id:"general-3",titleEn:"Dua of the Fasting Person",arabicText:"إِنَّ لِلصَّائِمِ عِنْدَ فِطْرِهِ لَدَعْوَةً مَا تُرَدُّ",transliteration:"Inna lis-saa'imi 'inda futrihi lada'watan maa turaddu",translationEn:"The fasting person has a supplication at the time of breaking fast that is not rejected.",category:"general",source:"Ibn Majah 1753"},{id:"general-4",titleEn:"Dua for Guidance",arabicText:"اللَّهُمَّ إِنِّي أَسْأَلُكَ الْهُدَى وَالتُّقَى وَالْعَفَافَ وَالْغِنَى",transliteration:"Allahumma inni as'alukal-huda wat-tuqa wal-'afaafa wal-ghina",translationEn:"O Allah, I ask You for guidance, piety, chastity and self-sufficiency.",category:"general",source:"Muslim 2721"},{id:"qadr-1",titleEn:"Dua for Laylatul Qadr",arabicText:"اللَّهُمَّ إِنَّكَ عَفُوٌّ تُحِبُّ الْعَفْوَ فَاعْفُ عَنِّي",transliteration:"Allahumma innaka 'afuwwun tuhibbul-'afwa fa'fu 'anni",translationEn:"O Allah, You are Pardoning and You love to pardon, so pardon me.",category:"laylatul-qadr",source:"Tirmidhi 3513"},{id:"qadr-2",titleEn:"Seeking the Night of Power",arabicText:"اللَّهُمَّ إِنِّي أَسْأَلُكَ مِنْ فَضْلِكَ وَرَحْمَتِكَ فَإِنَّهُ لَا يَمْلِكُهَا إِلَّا أَنْتَ",transliteration:"Allahumma inni as'aluka min fadlika wa rahmatika fa innahu laa yamlikuhaa illaa anta",translationEn:"O Allah, I ask You from Your bounty and mercy, for none possesses them except You.",category:"laylatul-qadr",source:"Al-Tabarani"}];var ml=[{id:"sehri",label:"Sehri"},{id:"iftar",label:"Iftar"},{id:"general",label:"General"},{id:"laylatul-qadr",label:"Laylatul Qadr"},{id:"favorites",label:"♥ Favorites"}],D="iftar",i="";async function s(a){let l=await Fa(),u=document.createDocumentFragment();u.appendChild(z("h1",{className:"page-title"},"Duas"));let A=z("div",{className:"dua-search-wrap"}),S=z("input",{className:"dua-search",type:"text",placeholder:"\uD83D\uDD0D Search duas...",value:i});S.addEventListener("input",()=>{i=S.value,s(a)}),A.appendChild(S),u.appendChild(A);let j=z("div",{className:"category-tabs-wrap"}),E=z("div",{className:"category-tabs",role:"tablist"});for(let N of ml){let b=z("button",{className:`category-tab${N.id===D?" active":""}`,role:"tab","aria-selected":N.id===D?"true":"false"},N.label);b.addEventListener("click",()=>{D=N.id,s(a)}),E.appendChild(b)}j.appendChild(E),u.appendChild(j);let k=Jl,q;if(D==="favorites")q=k.filter((N)=>l.has(N.id));else q=k.filter((N)=>N.category===D);if(i.trim()){let N=i.toLowerCase();q=q.filter((b)=>b.titleEn.toLowerCase().includes(N)||b.transliteration.toLowerCase().includes(N)||b.translationEn.toLowerCase().includes(N))}if(q.length===0){let N=z("div",{className:"error-state"});N.appendChild(z("div",{className:"error-icon"},D==="favorites"?"♡":"\uD83E\uDD32")),N.appendChild(z("div",{className:"error-message"},i?"No duas match your search.":D==="favorites"?"No favorites yet. Tap the heart on any dua to save it.":"No duas in this category.")),u.appendChild(N)}else for(let N of q)u.appendChild(nl(N,l.has(N.id),async(b)=>{await bl(b),s(a)}));if(Z(a,u),i){let N=a.querySelector(".dua-search");if(N)N.focus(),N.setSelectionRange(N.value.length,N.value.length)}}var Na=null;function Qa(){if(Na)return Promise.resolve(Na);return new Promise((a,l)=>{let u=indexedDB.open(Y,r);u.onsuccess=()=>{Na=u.result,a(Na)},u.onerror=()=>l(u.error)})}async function ga(){try{let a=await Qa();return new Promise((l,u)=>{let j=a.transaction("quranProgress","readonly").objectStore("quranProgress").get("progress");j.onsuccess=()=>l(j.result||{id:"progress",completedDays:[],lastUpdated:""}),j.onerror=()=>u(j.error)})}catch{return{completedDays:[],lastUpdated:""}}}async function pa(a){let l=await ga(),u=l.completedDays.indexOf(a);if(u>=0)l.completedDays.splice(u,1);else l.completedDays.push(a),l.completedDays.sort((A,S)=>A-S);l.lastUpdated=new Date().toISOString();try{let A=await Qa();await new Promise((S,j)=>{let E=A.transaction("quranProgress","readwrite");E.objectStore("quranProgress").put({id:"progress",...l}),E.oncomplete=()=>S(),E.onerror=()=>j(E.error)})}catch{}return l}async function Hl(){try{let a=await Qa();await new Promise((l,u)=>{let A=a.transaction("quranProgress","readwrite");A.objectStore("quranProgress").put({id:"progress",completedDays:[],lastUpdated:new Date().toISOString()}),A.oncomplete=()=>l(),A.onerror=()=>u(A.error)})}catch{}}function Ul(a,l,u,A){let S="quran-day-card";if(l)S+=" completed";if(u)S+=" today";let j=z("div",{className:S,id:u?"quran-today":void 0}),E=z("div",{className:"quran-day-info"});E.appendChild(z("div",{className:"quran-day-num"},`Day ${a.day} · Juz ${a.juz}`)),E.appendChild(z("div",{className:"quran-day-surah"},`${a.surahStart} ${a.ayahStart} – ${a.surahEnd} ${a.ayahEnd}`)),E.appendChild(z("div",{className:"quran-day-pages"},`Pages ${a.pages}`));let k=z("div",{className:"quran-checkbox"},l?"☑":"☐");return j.appendChild(E),j.appendChild(k),j.addEventListener("click",()=>A(a.day)),j}var vl=[{day:1,juz:1,surahStart:"Al-Fatiha",ayahStart:1,surahEnd:"Al-Baqarah",ayahEnd:141,pages:"1–20"},{day:2,juz:2,surahStart:"Al-Baqarah",ayahStart:142,surahEnd:"Al-Baqarah",ayahEnd:252,pages:"21–40"},{day:3,juz:3,surahStart:"Al-Baqarah",ayahStart:253,surahEnd:"Al-Imran",ayahEnd:92,pages:"41–60"},{day:4,juz:4,surahStart:"Al-Imran",ayahStart:93,surahEnd:"An-Nisa",ayahEnd:23,pages:"61–80"},{day:5,juz:5,surahStart:"An-Nisa",ayahStart:24,surahEnd:"An-Nisa",ayahEnd:147,pages:"81–100"},{day:6,juz:6,surahStart:"An-Nisa",ayahStart:148,surahEnd:"Al-Ma'idah",ayahEnd:81,pages:"101–120"},{day:7,juz:7,surahStart:"Al-Ma'idah",ayahStart:82,surahEnd:"Al-An'am",ayahEnd:110,pages:"121–140"},{day:8,juz:8,surahStart:"Al-An'am",ayahStart:111,surahEnd:"Al-A'raf",ayahEnd:87,pages:"141–160"},{day:9,juz:9,surahStart:"Al-A'raf",ayahStart:88,surahEnd:"Al-Anfal",ayahEnd:40,pages:"161–180"},{day:10,juz:10,surahStart:"Al-Anfal",ayahStart:41,surahEnd:"At-Tawbah",ayahEnd:92,pages:"181–200"},{day:11,juz:11,surahStart:"At-Tawbah",ayahStart:93,surahEnd:"Hud",ayahEnd:5,pages:"201–220"},{day:12,juz:12,surahStart:"Hud",ayahStart:6,surahEnd:"Yusuf",ayahEnd:52,pages:"221–240"},{day:13,juz:13,surahStart:"Yusuf",ayahStart:53,surahEnd:"Ibrahim",ayahEnd:52,pages:"241–260"},{day:14,juz:14,surahStart:"Al-Hijr",ayahStart:1,surahEnd:"An-Nahl",ayahEnd:128,pages:"261–280"},{day:15,juz:15,surahStart:"Al-Isra",ayahStart:1,surahEnd:"Al-Kahf",ayahEnd:74,pages:"281–300"},{day:16,juz:16,surahStart:"Al-Kahf",ayahStart:75,surahEnd:"Ta-Ha",ayahEnd:135,pages:"301–320"},{day:17,juz:17,surahStart:"Al-Anbiya",ayahStart:1,surahEnd:"Al-Hajj",ayahEnd:78,pages:"321–340"},{day:18,juz:18,surahStart:"Al-Mu'minun",ayahStart:1,surahEnd:"Al-Furqan",ayahEnd:20,pages:"341–360"},{day:19,juz:19,surahStart:"Al-Furqan",ayahStart:21,surahEnd:"An-Naml",ayahEnd:55,pages:"361–380"},{day:20,juz:20,surahStart:"An-Naml",ayahStart:56,surahEnd:"Al-Ankabut",ayahEnd:45,pages:"381–400"},{day:21,juz:21,surahStart:"Al-Ankabut",ayahStart:46,surahEnd:"Al-Ahzab",ayahEnd:30,pages:"401–420"},{day:22,juz:22,surahStart:"Al-Ahzab",ayahStart:31,surahEnd:"Ya-Sin",ayahEnd:27,pages:"421–440"},{day:23,juz:23,surahStart:"Ya-Sin",ayahStart:28,surahEnd:"Az-Zumar",ayahEnd:31,pages:"441–460"},{day:24,juz:24,surahStart:"Az-Zumar",ayahStart:32,surahEnd:"Fussilat",ayahEnd:46,pages:"461–480"},{day:25,juz:25,surahStart:"Fussilat",ayahStart:47,surahEnd:"Al-Jathiyah",ayahEnd:37,pages:"481–500"},{day:26,juz:26,surahStart:"Al-Ahqaf",ayahStart:1,surahEnd:"Al-Hadid",ayahEnd:29,pages:"501–520"},{day:27,juz:27,surahStart:"Al-Mujadila",ayahStart:1,surahEnd:"At-Tahrim",ayahEnd:12,pages:"521–540"},{day:28,juz:28,surahStart:"Al-Mulk",ayahStart:1,surahEnd:"Al-Mursalat",ayahEnd:50,pages:"541–560"},{day:29,juz:29,surahStart:"An-Naba",ayahStart:1,surahEnd:"At-Takwir",ayahEnd:29,pages:"561–580"},{day:30,juz:30,surahStart:"Al-Infitar",ayahStart:1,surahEnd:"An-Nas",ayahEnd:6,pages:"581–604"}];var C="all",d=null;function Tl(){let a=$.getState();if(a.todayData?.isRamadan&&a.todayData.ramadanDay)return a.todayData.ramadanDay;if(a.todayData?.isRamadan)return a.todayData.hijriDay;return null}function il(a,l){if(d)clearTimeout(d);let u=document.querySelector(".undo-toast");if(u)u.remove();let A=z("div",{className:"undo-toast show"});A.appendChild(z("span",null,a));let S=z("button",{className:"undo-btn"},"Undo");S.addEventListener("click",()=>{if(l(),A.remove(),d)clearTimeout(d)}),A.appendChild(S),document.body.appendChild(A),d=window.setTimeout(()=>{A.classList.remove("show"),setTimeout(()=>A.remove(),300)},4000)}async function f(a){let l=await ga(),u=new Set(l.completedDays),A=vl,S=Tl(),j=document.createDocumentFragment(),E=z("div",{className:"quran-title-row"});if(E.appendChild(z("h1",{className:"page-title"},"Quran Plan")),S){let U=z("button",{className:"calendar-action-btn"},"\uD83D\uDCCD Go to today");U.addEventListener("click",()=>{let L=a.querySelector("#quran-today");if(L)L.scrollIntoView({behavior:"smooth",block:"center"})}),E.appendChild(U)}j.appendChild(E);let k=z("div",{className:"quran-progress"}),q=z("div",{className:"quran-progress-text"},`${u.size}/30 days complete`),N=z("div",{className:"quran-progress-bar"}),b=z("div",{className:"quran-progress-fill"});b.style.width=`${u.size/30*100}%`,N.appendChild(b),k.appendChild(q),k.appendChild(N),j.appendChild(k);let h=z("div",{className:"quran-filters"}),J=[{id:"all",label:"All"},{id:"pending",label:"Pending"},{id:"completed",label:"Completed"}];for(let U of J){let L=z("button",{className:`filter-pill${U.id===C?" active":""}`},U.label);L.addEventListener("click",()=>{C=U.id,f(a)}),h.appendChild(L)}j.appendChild(h);let O=A;if(C==="pending")O=A.filter((U)=>!u.has(U.day));else if(C==="completed")O=A.filter((U)=>u.has(U.day));for(let U of O){let L=U.day===S;j.appendChild(Ul(U,u.has(U.day),L,async(Q)=>{let c=u.has(Q);await pa(Q),il(c?`Day ${Q} marked pending`:`Day ${Q} completed`,async()=>{await pa(Q),f(a)}),f(a)}))}if(O.length===0){let U=z("div",{className:"error-state"});U.appendChild(z("div",{className:"error-icon"},C==="completed"?"\uD83D\uDCD6":"✅")),U.appendChild(z("div",{className:"error-message"},C==="completed"?"No completed days yet.":"All days completed!")),j.appendChild(U)}let X=z("button",{className:"btn-reset"},"Reset Progress");X.addEventListener("click",async()=>{if(confirm("Are you sure you want to reset all Quran reading progress?"))await Hl(),f(a)}),j.appendChild(X),Z(a,j)}async function Cl(){let a=ma();if(a.theme==="system"){let S=window.matchMedia("(prefers-color-scheme: dark)").matches;document.documentElement.setAttribute("data-theme",S?"dark":"light"),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(j)=>{if($.getState().settings.theme==="system")document.documentElement.setAttribute("data-theme",j.matches?"dark":"light")})}else document.documentElement.setAttribute("data-theme",a.theme);let l={settings:a,currentMonthData:null,otherMonthData:null,todayData:null,nextPrayer:null,isOnline:navigator.onLine,isLoading:!0,error:null,methods:null};Ba(l),W.init(),W.onChange((S)=>{$.setState({isOnline:S})}),await fa();let u=document.getElementById("app"),A=document.createElement("main");A.setAttribute("role","main"),u.appendChild(al()),u.appendChild(A),u.appendChild(ea()),g.onRouteChange((S)=>{Ol(S,A)});try{let{current:S,other:j}=await oa(a);$.setState({currentMonthData:S.data,otherMonthData:j?.data||null,isLoading:!1,error:S.source==="error"?S.error||"Failed to load data":null});let E=El();$.setState({todayData:E})}catch(S){$.setState({isLoading:!1,error:S.message||"Failed to load prayer times"})}if(la().then((S)=>$.setState({methods:S})).catch(()=>{}),g.init(),!window.location.hash||window.location.hash==="#/"||window.location.hash==="#")Ol("today",A);if("serviceWorker"in navigator)navigator.serviceWorker.register("/sw.js").catch(()=>{})}function Ol(a,l){switch(jl(),a){case"today":Xa(l);break;case"calendar":T(l);break;case"settings":hl(l);break;case"duas":s(l);break;case"quran":f(l);break}}Cl().catch(console.error);
